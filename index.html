<!DOCTYPE html>
<html>
<head>
	<title>The Official 4D Miner Website!</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<style>
		
		@font-face {
			font-family: "4D Miner";
			src: url("4D Miner.ttf");
		}
		
		body {
			margin: 0;
		}
		a {
			color: inherit;
			text-decoration: inherit;
		}
		
		:root {
			background-color: black;
			overflow-x: hidden;
			
			font-family: "4D Miner";
			color: #f1f1f1;
			font-size: 24px;
			text-align: center;
		}
		
		@media screen and (max-width: 900px) {
			:root {
				font-size: 17.5px;
			}
		}
		
		@media screen and (max-width: 700px) {
			:root {
				font-size: 14px;
			}
		}
		
		@media screen and (max-width: 450px) {
			:root {
				font-size: 10.5px;
			}
		}
		
		
		
		.center {
			display: flex;
			flex-direction: column;
			align-items: center;
		}
		
		.button-4d {
			margin-bottom: 1em;
			
			border-radius: 2px;
			border: 2px solid #bcbcbc;
			background-color: rgba(0, 0, 0, 0.7);
			cursor: pointer;
			padding: 10px 20px;
			
			color: #fff;
		}
		
		
		
		#bgVideo {
			position: fixed;
			width: 100%;
			height: 100%;
			object-fit: cover;
			
			z-index: -1;
			pointer-events: none;
			
			transition: ease-in-out opacity 2s;
			filter: blur(5px);
		}
		
		#logo {
			margin: 2em;
			max-width: calc(100% - 4em);
		}
		
		.content {
			margin: 0 12%;
			margin-bottom: 4em;
			
			border-radius: 0.8em;
			border: 2px solid #c700c7;
			background: rgba(0, 0, 0, 0.7);
			padding: 1em 2em;
			
			/* for the forgs */
			position: relative;
			padding-bottom: 64px;
		}
		
		#yt {
			width: 100%;
			max-width: 560px;
			aspect-ratio: 16/9;
			
			margin-bottom: 2em;
		}
		
		#Frank {
			--stand: url("Frank.gif");
			--jump: url("FrankJump.png");
			top: -65px;
			right: 0px;
		}
		@media screen and (max-width: 1600px) {
			#Frank {
				top: unset;
				bottom: 0px;
			}
		}
		
		#Fernanda {
			--stand: url("Fernanda.gif");
			--jump: url("FernandaJump.png");
			bottom: 0px;
			left: 0px;
		}
		
		
		
		.forg img {
			position: absolute;
			width: 64px;
			height: auto;
			content: var(--stand);
			
			animation-duration: 0.5s;
		}
		
		/* We use the hidden checkbox to reset the animation state */
		.forg input {
			display: none;
		}
		input:checked       + img {
			animation-name: forg-jump1;
		}
		input:not(:checked) + img {
			animation-name: forg-jump2;
		}
		/* we need to duplicate this thing cause css kinda sucks */
		@keyframes forg-jump1 {
			from {
				transform: translateY(0);
				/* animation-timing-function: cubic-bezier(0.27, 0.88, .58, 1); */
				animation-timing-function: cubic-bezier(0.29, 0.61, 0.63, 1);
				pointer-events: none;
				content: var(--jump);
			}
			
			50% {
				transform: translateY(-100px);
				/* animation-timing-function: cubic-bezier(0.42, 0, 0.73, 0.12); */
				animation-timing-function: cubic-bezier(0.37, 0, 0.71, 0.39);
				pointer-events: none;
				content: var(--jump);
			}
			
			to {
				transform: translateY(0);
				pointer-events: none;
				content: var(--jump);
			}
		}
		@keyframes forg-jump2 {
			from {
				transform: translateY(0);
				/* animation-timing-function: cubic-bezier(0.27, 0.88, .58, 1); */
				animation-timing-function: cubic-bezier(0.29, 0.61, 0.63, 1);
				pointer-events: none;
				content: var(--jump);
			}
			
			50% {
				transform: translateY(-100px);
				/* animation-timing-function: cubic-bezier(0.42, 0, 0.73, 0.12); */
				animation-timing-function: cubic-bezier(0.37, 0, 0.71, 0.39);
				pointer-events: none;
				content: var(--jump);
			}
			
			to {
				transform: translateY(0);
				pointer-events: none;
				content: var(--jump);
			}
		}
		
	</style>
	
	<script>
		
		let abbarationTexts;
		
		function refreshTexts(root) {
			abbarationTexts = document.querySelectorAll(".fancy-text");
			updateFancytexts();
			
			root.querySelectorAll('.shake-on-hover').forEach(element => {
				let intervalId;
			
				element.addEventListener('mouseover', () => {
					if (typeof intervalId !== 'undefined')
						return;
					intervalId = setInterval(() => {
						const randomX = Math.random() * 2 - 1;
						const randomY = Math.random() * 2 - 1;
						const opacity = 0.7;
						// const opacity = Math.random() * 0.7;
			
						element.style.textShadow = `rgba(255, 0, 255, ${opacity}) ${randomX /  5}em ${randomY /  5}em, rgba(0, 255, 255, ${opacity}) ${-randomX /  5}em ${-randomY /  5}em`;
						element.style.boxShadow  = `rgba(255, 0, 255, ${opacity}) ${randomX / 10}em ${randomY / 10}em, rgba(0, 255, 255, ${opacity}) ${-randomX / 10}em ${-randomY / 10}em`;
					}, 15);
				}); 
			
				element.addEventListener('mouseout', () => {
					clearInterval(intervalId);
					intervalId = undefined;
					element.style.textShadow = ``;
					element.style.boxShadow  = ``;
				});
			});
			
			// boxes are scrollable so make them render text correctly
			root.querySelectorAll(".scroll").forEach( elem => {
				elem.addEventListener("scroll",updateFancytexts);
				elem.addEventListener("scrollend",updateFancytexts);
			});
		}
		
		let cursorX = screen.width * 0.25;
		let cursorY = screen.height * 0.5;
		function updateFancytexts() {
			abbarationTexts.forEach((element) => {
				const elementRect = element.getBoundingClientRect();
				const elementCenterX = ( elementRect.left + elementRect.right )/ 2;
				const elementCenterY = ( elementRect.top + elementRect.bottom )/ 2;
				const charsize = getComputedStyle(element)["font-size"].replace('px','');
				const screensize = Math.sqrt( screen.width*screen.width + screen.height*screen.height );
				
				let offsetX = (cursorX - elementCenterX) * charsize/screensize;
				let offsetY = (cursorY - elementCenterY) * charsize/screensize;
				
				let maxDistance = charsize * 0.5;

				const distance = Math.sqrt(offsetX * offsetX + offsetY * offsetY);

				const opacity = 0.7*( 1 - distance / maxDistance );

				element.style.textShadow = `rgba(255, 0, 255, ${opacity}) ${offsetX}px ${offsetY}px, rgba(0, 255, 255, ${opacity}) ${-offsetX}px ${-offsetY}px`;
			});
		}
		
		
		
		document.addEventListener("DOMContentLoaded", ()=>{
			
			// Video Background
			let bgVideo = document.getElementById("bgVideo");
			bgVideo.addEventListener('loadeddata', ()=> bgVideo.style.opacity = "1" );
			bgVideo.src = "4dm_bg.mp4";
			
			// init fancy text effects for the page
			refreshTexts(document);
			
			document.addEventListener("mousemove", (event) => {
				cursorX = event.clientX;
				cursorY = event.clientY;
				updateFancytexts();
			});
			// document.body.addEventListener("mouseleave", () => {
			// 	cursorX = 10000;
			// 	cursorY = 10000;
			// 	updateFancytexts();
			// });
			
			
			// scroll of body and html are weird, thx webspecs
			// document is added manually, usually
			document.addEventListener("scroll",updateFancytexts);
			document.addEventListener("scrollend",updateFancytexts);
			
		});
		
	</script>
</head>
<body class="center">
	<img id="logo" src="logo.png">
	
	<video autoplay muted loop disablepictureinpicture id="bgVideo" style="opacity:0">
		Your browser does not support HTML5 video.
	</video>
	
	<div class="center content">
		<h1 class="fancy-text">Welcome to the official 4D Miner website!</h1>
		<a href="https://discord.gg/pMtZa6AVy2" target="_blank" class="button-4d shake-on-hover">Official Discord!</a>
		<a href="https://store.steampowered.com/app/1941640/4D_Miner/" target="_blank" class="button-4d shake-on-hover">Wishlist on Steam!</a>
		
		<p style="margin-bottom: 2em">4D Miner is a 4-dimensional survival sandbox game, where you can explore an infinite, procedurally-generated, 4-dimensional world!</p>
		
		<h2 class="fancy-text">Latest Devlog:</h2>
		<iframe id="yt" src="https://www.youtube.com/embed/f4CMKoVgqOM" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
		
		<h2 class="fancy-text">More Links:</h2>
		<a href="https://youtube.com/Mashpoe/" class="button-4d shake-on-hover">YouTube Channel</a>
		<a href="https://patreon.com/Mashpoe/" class="button-4d shake-on-hover">Patreon</a>
		<a href="https://4d-miner.fandom.com/" class="button-4d shake-on-hover">Wiki</a>
		<a href="https://reddit.com/r/4D_Miner" target="_blank" class="button-4d shake-on-hover">Subreddit</a>
		<a href="https://4d-modding.com" target="_blank" class="button-4d shake-on-hover">Modding Tools<span style="font-size: 8px">(by Tr1Ngle)</span></a>
		
		<label class="forg"><input type="checkbox"><img id="Frank"    title="Frank"   ></label>
		<label class="forg"><input type="checkbox"><img id="Fernanda" title="Fernanda"></label>
	</div>
</body>
</html>
